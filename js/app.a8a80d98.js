(function(){"use strict";var e={5515:function(e,t,s){var a=s(2856),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],n=s(1656),o={},u=(0,n.A)(o,r,i,!1,null,null,null),l=u.exports,c=s(1594),d=function(){var e=this,t=e._self._c;return this.$store.state.userLoading?t("div",[e._v("Данные загружаются...")]):this.$store.state.userLoadingFailed?t("div",[e._v("Произошла ошибка")]):t("main",[t("section",{staticClass:"section-user user"},[t("div",{staticClass:"user-container container"},[t("div",{staticClass:"user-top"},[t("img",{staticClass:"image user-image",attrs:{href:"#",src:e.user.picture.large,alt:e.user.name.first}})]),t("div",{staticClass:"user-content"},[t("h2",{staticClass:"user-title"},[e._v(e._s(e.fio))]),t("p",{staticClass:"user-descr"},[e._v(e._s(e.user.dob.age))]),t("p",{staticClass:"user-descr"},[e._v(e._s(e.user.email))]),t("p",{staticClass:"user-descr"},[t("span",{staticClass:"user-location"},[e._v(e._s(e.user.location.state))]),t("span",{staticClass:"user-location"},[e._v(e._s(e.user.location.country))]),t("span",{staticClass:"user-location"},[e._v(e._s(e.user.location.city))])]),t("p",{staticClass:"user-descr"}),t("p",{staticClass:"user-descr"}),t("p",{staticClass:"user-descr"})])])])])},g=[],p=s(1910),h={data(){return{userData:{},userDataFailed:!1}},methods:{...(0,p.i0)(["userLoad"]),loadUsersInfo(){this.userLoad(this.$route.params.id)},userDataFailedChecked(e){this.userDataFailed=e}},computed:{...(0,p.L8)(["userInfo","userInfoReload"]),user(){try{return this.userDataFailed?this.userInfoReload[0]:{...this.userInfo(this.$route.params.id)}}catch{return this.loadUsersInfo(),this.userDataFailedChecked(!0),this.userInfoReload[0]}},fio(){return`${this.user.name.title} ${this.user.name.first} ${this.user.name.last}`}}},m=h,_=(0,n.A)(m,d,g,!1,null,null,null),f=_.exports,v=function(){var e=this,t=e._self._c;return this.$store.state.userListLoading?t("div",[e._v("Данные загружаются...")]):this.$store.state.userListLoadingFailed?t("div",[e._v("Произошла ошибка")]):t("main",[t("h1",{staticClass:"title"},[e._v("Таблица пользователей")]),t("section",{staticClass:"section-user"},[t("div",{staticClass:"user-container container"},[t("UsersPerPage",{attrs:{"users-per-page":e.usersPerPage},on:{"update:usersPerPage":function(t){e.usersPerPage=t},"update:users-per-page":function(t){e.usersPerPage=t}}}),t("BasePagination",{attrs:{page:e.page,count:e.countUsers,"per-page":e.usersPerPage},on:{"update:page":function(t){e.page=t}}}),t("TablePage",{attrs:{users:e.users,"sorted-column":e.column,"sorted-column-dir":e.columnDir},on:{"update:sortedColumn":function(t){e.column=t},"update:sorted-column":function(t){e.column=t},"update:sortedColumnDir":function(t){e.columnDir=t},"update:sorted-column-dir":function(t){e.columnDir=t}}}),t("BasePagination",{attrs:{page:e.page,count:e.countUsers,"per-page":e.usersPerPage},on:{"update:page":function(t){e.page=t}}})],1)])])},C=[],P=function(){var e=this,t=e._self._c;return t("table",{staticClass:"table-user"},[t("caption",{staticClass:"table-title"},[e._v("Список пользователей")]),t("thead",{staticClass:"table-user__header"},[t("tr",{staticClass:"table-user__header-row"},[t("th",{staticClass:"table-user__column",on:{click:function(t){return e.sortedTable("fio")}}},[e._v("ФИО пользователя")]),t("th",{staticClass:"table-user__column",on:{click:function(t){return e.sortedTable("login")}}},[e._v("Логин")]),t("th",{staticClass:"table-user__column",on:{click:function(t){return e.sortedTable("userAge")}}},[e._v("Возраст")]),t("th",{staticClass:"table-user__column",on:{click:function(t){return e.sortedTable("country")}}},[e._v("Страна")]),t("th",{staticClass:"table-user__column",on:{click:function(t){return e.sortedTable("city")}}},[e._v("Город")]),t("th",{staticClass:"table-user__column",on:{click:function(t){return e.sortedTable("registeredAge")}}},[e._v("Срок регистрации")])])]),e._l(e.users,(function(e){return t("TableRow",{key:e.itemId,attrs:{user:e}})}))],2)},b=[],L=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"table-user__row",on:{click:e.goToUserPage}},[t("td",{staticClass:"table-user__cell"},[e._v(e._s(e.fio))]),t("td",{staticClass:"table-user__cell"},[e._v(e._s(e.user.login))]),t("td",{staticClass:"table-user__cell"},[e._v(e._s(e.user.userAge))]),t("td",{staticClass:"table-user__cell"},[e._v(e._s(e.user.location.country))]),t("td",{staticClass:"table-user__cell"},[e._v(e._s(e.user.location.city))]),t("td",{staticClass:"table-user__cell"},[e._v(e._s(e.user.registeredAge))])])},y=[],D=(s(4114),{props:["user"],computed:{fio(){return`${this.user.name.title} ${this.user.name.first} ${this.user.name.last}`}},methods:{goToUserPage(){this.$router.push({name:"user",params:{id:this.user.itemId}})}}}),k=D,A=(0,n.A)(k,L,y,!1,null,null,null),$=A.exports,w={data(){return{currentSortedColumnDir:!0}},props:["users","sortedColumn","sortedColumnDir"],components:{TableRow:$},methods:{sortedTable(e){this.$emit("update:sortedColumn",e),this.$emit("update:sortedColumnDir",!this.currentSortedColumnDir)}},watch:{sortedColumnDir(e){this.currentSortedColumnDir=e}}},U=w,T=(0,n.A)(U,P,b,!1,null,null,null),x=T.exports,F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination__wrapper"},[t("ul",{staticClass:"catalog__pagination pagination"},[t("li",{staticClass:"pagination__item"},[t("a",{staticClass:"pagination__link",class:{"pagination__link--disabled":1===e.page},attrs:{href:"#","aria-label":"Предыдущая страница"},on:{click:function(t){return t.preventDefault(),e.pagePrev(e.page)}}},[e._v(" Назад ")])]),e._l(e.pages,(function(s){return t("li",{key:s,staticClass:"pagination__item",class:{"pagination__item--hidden":e.pageHideClass(s),"pagination__item--prev":e.pagePrevClass(s),"pagination__item--next":e.pageNextClass(s)}},[t("a",{staticClass:"pagination__link",class:{"pagination__link--current":s===e.page},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.paginate(s)}}},[e._v(" "+e._s(s)+" ")])])})),t("li",{staticClass:"pagination__item"},[t("a",{staticClass:"pagination__link",class:{"pagination__link--disabled":e.page===e.pages},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(t){return t.preventDefault(),e.pageNext(e.page)}}},[e._v(" Вперёд ")])])],2)])},I=[],S={props:["page","count","perPage"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{pagePrevClass(e){const t=e===this.page-1&&e>2&&this.pages>5;return t},pageNextClass(e){const t=e===this.page+1&&e<this.pages-1&&this.pages>5;return t},pageHideClass(e){const t=(e>this.page+1||e<this.page-1)&&e>1&&e<this.pages&&this.pages>5;return t},paginate(e){this.$emit("update:page",e)},pagePrev(){1!==this.page&&this.$emit("update:page",this.page-1)},pageNext(){this.page!==this.pages&&this.$emit("update:page",this.page+1)}}},O=S,j=(0,n.A)(O,F,I,!1,null,null,null),R=j.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form__block"},[t("legend",{staticClass:"form__legend"},[e._v("Элементов на странице")]),t("label",{staticClass:"form__label form__label--select form__label--page",attrs:{for:"select"}},[t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.currentUsersPerPage,expression:"currentUsersPerPage",modifiers:{number:!0}}],staticClass:"form__select form__select--page",attrs:{type:"text",name:"category",id:"select"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var s="_value"in t?t._value:t.value;return e._n(s)}));e.currentUsersPerPage=t.target.multiple?s:s[0]},e.onChangeSelect]}},[t("option",{attrs:{value:"10"}},[e._v("10")]),t("option",{attrs:{value:"25"}},[e._v("25")]),t("option",{attrs:{value:"50"}},[e._v("50")])])])])},M=[],B={data(){return{currentUsersPerPage:this.usersPerPage||6}},props:["usersPerPage"],watch:{usersPerPage(e){this.currentUsersPerPage=e}},methods:{onChangeSelect(){this.$emit("update:usersPerPage",this.currentUsersPerPage)}}},H=B,E=(0,n.A)(H,N,M,!1,null,null,null),q=E.exports,z={data(){return{usersData:{},page:1,usersPerPage:10,column:"fio",columnDir:!0}},computed:{...(0,p.L8)(["usersList"]),usersArray(){return this.usersList?this.usersList:[]},countUsers(){return this.usersArray.length?this.usersArray.length:0},users(){if(!this.usersArray.length)return[];const e=this.getSortUsers(this.column,this.columnDir),t=(this.page-1)*this.usersPerPage;return e.slice(t,t+this.usersPerPage)}},methods:{...(0,p.i0)(["loadUsers","userLoad","loadPagination"]),getSortUsers(e,t){const s=[...this.usersArray];return s.sort(((s,a)=>{const r=!1===t?s[e]<a[e]:s[e]>a[e];return r?1:-1}))}},watch:{usersPerPage:{handler(){this.page=1}},column(){this.getSortUsers(this.column,this.columnDir)},columnDir(){this.getSortUsers(this.column,this.columnDir)}},created(){const e=Array.isArray(this.$store.state.userListData)&&this.$store.state.userListData.length>0;e||this.loadUsers(100)},components:{TablePage:x,BasePagination:R,UsersPerPage:q}},G=z,J=(0,n.A)(G,v,C,!1,null,null,null),K=J.exports;a.Ay.use(c.Ay);const Q=[{path:"/",name:"main",component:K},{name:"user",component:f,path:"/user/:id"}],V=new c.Ay({routes:Q});var W=V,X={updateUserListData(e,t){e.userData={},e.userListData=t},userDetailInfo(e,t){e.userData=t.results},userLoadingChecking(e,t){e.userLoading=t},userLoadingFailedChecking(e,t){e.userLoadingFailed=t},userListLoadingChecking(e,t){e.userListLoading=t},userListLoadingFailedChecking(e,t){e.userListLoadingFailed=t}},Y=s(2257);const Z="https://randomuser.me";function ee(e){return Y.A.get(`${Z}/api/?results=${e}`)}function te(e,t){return Y.A.get(`${Z}/api/?page=${e}&results=${t}`)}function se(e){return Y.A.get(`${Z}/api/?id=${e}`)}var ae=s(3347),re={async loadUsers(e,t){e.commit("userListLoadingChecking",!0),e.commit("userListLoadingFailedChecking",!1);try{await new Promise((e=>setTimeout(e,0)));const s=await ee(t),a=s.data.results.map((e=>({...e,fio:`${e.name.title} ${e.name.first} ${e.name.last}`,login:e.login.username,userAge:e.dob.age,registeredAge:e.registered.age,country:e.location.country,city:e.location.city,itemId:(0,ae.Ak)()})));e.commit("updateUserListData",a)}catch{e.commit("userListLoadingFailedChecking",!0)}e.commit("userListLoadingChecking",!1)},async userLoad(e,t){e.commit("userLoadingChecking",!0),e.commit("userLoadingFailedChecking",!1);try{await new Promise((e=>setTimeout(e,0)));const s=await se(t);e.commit("userDetailInfo",s.data)}catch{e.commit("userLoadingFailedChecking",!0)}e.commit("userLoadingChecking",!1)},async loadPagination(e,{page:t,perPage:s}){clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((async()=>{const a=await te(t,s);e.commit("updateUserListData",a.data)}),0)}},ie={usersList(e){return e.userListData},userInfoReload(e){return e.userData},userInfo:e=>t=>e.userListData.find((e=>e.itemId===t))};a.Ay.use(p.Ay);var ne=new p.Ay.Store({state:{userListData:{},userData:{},userListLoading:!1,userListLoadingFailed:!1,userLoading:!1,userLoadingFailed:!1},getters:ie,mutations:X,actions:re});a.Ay.config.productionTip=!1,new a.Ay({router:W,store:ne,render:e=>e(l)}).$mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,i){if(!a){var n=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],i=e[c][2];for(var o=!0,u=0;u<a.length;u++)(!1&i||n>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[u])}))?a.splice(u--,1):(o=!1,i<n&&(n=i));if(o){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,r,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,i,n=a[0],o=a[1],u=a[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(u)var c=u(s)}for(t&&t(a);l<n.length;l++)i=n[l],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},a=self["webpackChunkvue_test_nic"]=self["webpackChunkvue_test_nic"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5515)}));a=s.O(a)})();
//# sourceMappingURL=app.a8a80d98.js.map